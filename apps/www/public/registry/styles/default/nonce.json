{
  "name": "nonce",
  "dependencies": [
    "wagmi"
  ],
  "files": [
    {
      "name": "nonce.tsx",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport {\n  useAccount,\n  useChainId,\n  usePublicClient,\n  useQuery,\n  type PublicClient,\n} from \"wagmi\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Skeleton } from \"@/registry/default/ui/skeleton\"\n\ninterface NonceProps extends React.HTMLAttributes<HTMLDivElement> {\n  address?: `0x${string}`\n  chainId?: number\n}\n\nconst useNonce = ({\n  address,\n  publicClient,\n}: Pick<NonceProps, \"address\"> & { publicClient: PublicClient }) => {\n  return useQuery([\"wallet-nonce\", address, publicClient.chain.id], {\n    queryFn: () => {\n      if (!address) return\n      return publicClient?.getTransactionCount({\n        address,\n      })\n    },\n    enabled: !!address && !!publicClient,\n  })\n}\n\nconst Nonce = React.forwardRef<HTMLDivElement, NonceProps>(\n  ({ className, address, chainId, ...props }, ref) => {\n    const connectedChainId = useChainId()\n    const selectedChainId = chainId ?? connectedChainId\n\n    const publicClient = usePublicClient({\n      chainId: selectedChainId,\n    })\n\n    const { address: connectedAddress } = useAccount()\n    const selectedAddress = address ?? connectedAddress\n\n    const { data, isLoading } = useNonce({\n      publicClient,\n      address: selectedAddress,\n    })\n\n    if (isLoading) {\n      return <Skeleton className={cn(\"h-6 w-14\", className)} {...props} />\n    }\n\n    return (\n      <div ref={ref} className={className} {...props}>\n        {data}\n      </div>\n    )\n  }\n)\n\nNonce.displayName = \"Nonce\"\n\nexport { Nonce }\n"
    }
  ],
  "type": "components:buidl"
}